{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shoai/OneDrive/Desktop/shoaib%20bhai%20purna/client/src/app/admin/tests/create/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { motion } from 'framer-motion';\r\nimport { Plus, Trash2, CheckCircle2, Save, ArrowLeft, Loader2 } from 'lucide-react';\r\nimport axios from 'axios';\r\n\r\nconst CreateTestPage = () => {\r\n    const router = useRouter();\r\n    const [submitting, setSubmitting] = useState(false);\r\n\r\n    // Test Metadata\r\n    const [testData, setTestData] = useState({\r\n        title: '',\r\n        duration: 180, // Default 3 hours\r\n        negativeMarks: 1, // Default -1\r\n        totalMarks: 0\r\n    });\r\n\r\n    // Questions Array\r\n    const [questions, setQuestions] = useState([\r\n        { questionText: '', options: ['', '', '', ''], correctOption: 0, marks: 4 }\r\n    ]);\r\n\r\n    const handleTestChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setTestData({ ...testData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleQuestionChange = (index: number, field: string, value: any) => {\r\n        const newQuestions: any = [...questions];\r\n        newQuestions[index][field] = value;\r\n        setQuestions(newQuestions);\r\n    };\r\n\r\n    const handleOptionChange = (qIndex: number, oIndex: number, value: string) => {\r\n        const newQuestions: any = [...questions];\r\n        newQuestions[qIndex].options[oIndex] = value;\r\n        setQuestions(newQuestions);\r\n    };\r\n\r\n    const addQuestion = () => {\r\n        setQuestions([...questions, { questionText: '', options: ['', '', '', ''], correctOption: 0, marks: 4 }]);\r\n    };\r\n\r\n    const removeQuestion = (index: number) => {\r\n        if (questions.length > 1) {\r\n            setQuestions(questions.filter((_, i) => i !== index));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        setSubmitting(true);\r\n        try {\r\n            // Calculate total marks automatically\r\n            const totalMarks = questions.reduce((sum, q) => sum + Number(q.marks), 0);\r\n\r\n            const payload = {\r\n                ...testData,\r\n                totalMarks,\r\n                questions\r\n            };\r\n\r\n            await axios.post('http://localhost:5000/api/tests', payload);\r\n            router.push('/admin/tests');\r\n        } catch (error) {\r\n            alert('Error creating test');\r\n            console.error(error);\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto space-y-8 pb-20\">\r\n            <div className=\"flex items-center gap-4 mb-6\">\r\n                <button onClick={() => router.back()} className=\"p-2 bg-zinc-900 rounded-lg hover:bg-zinc-800 transition-colors\">\r\n                    <ArrowLeft className=\"text-gray-400\" />\r\n                </button>\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-white\">Create New Test</h1>\r\n                    <p className=\"text-gray-400 text-sm\">Design your test structure and questions</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Test Details Card */}\r\n            <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-2xl p-6 backdrop-blur-sm\">\r\n                <h3 className=\"text-lg font-bold text-white mb-4\">Test Configuration</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-2\">Test Title</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"title\"\r\n                            value={testData.title}\r\n                            onChange={handleTestChange}\r\n                            className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-green-500\"\r\n                            placeholder=\"e.g. GPAT 2024 Mock Test 1\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-2\">Duration (Minutes)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"duration\"\r\n                            value={testData.duration}\r\n                            onChange={handleTestChange}\r\n                            className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-green-500\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                    <label className=\"block text-sm font-medium text-gray-400 mb-2\">Negative Marks (per wrong answer)</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"negativeMarks\"\r\n                        value={testData.negativeMarks}\r\n                        onChange={handleTestChange}\r\n                        step=\"0.25\"\r\n                        className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-green-500\"\r\n                        placeholder=\"e.g. 1 or 0.25\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 mt-1\">Value to deduct for incorrect answers (e.g., enter 1 for -1)</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Questions Builder */}\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-xl font-bold text-white\">Questions ({questions.length})</h3>\r\n                    <button\r\n                        onClick={addQuestion}\r\n                        className=\"flex items-center gap-2 text-sm font-medium text-blue-400 hover:text-blue-300 bg-blue-500/10 px-4 py-2 rounded-lg transition-colors\"\r\n                    >\r\n                        <Plus size={16} /> Add Question\r\n                    </button>\r\n                </div>\r\n\r\n                {questions.map((q, qIndex) => (\r\n                    <motion.div\r\n                        key={qIndex}\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"bg-zinc-900 border border-zinc-800 rounded-2xl p-6 relative group\"\r\n                    >\r\n                        <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            <button\r\n                                onClick={() => removeQuestion(qIndex)}\r\n                                className=\"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors\"\r\n                            >\r\n                                <Trash2 size={18} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"mb-4 pr-10\">\r\n                            <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2\">Question {qIndex + 1}</label>\r\n                            <textarea\r\n                                value={q.questionText}\r\n                                onChange={(e) => handleQuestionChange(qIndex, 'questionText', e.target.value)}\r\n                                className=\"w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white focus:outline-none focus:border-blue-500 min-h-[80px]\"\r\n                                placeholder=\"Enter your question here...\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            {q.options.map((opt, oIndex) => (\r\n                                <div key={oIndex} className=\"relative\">\r\n                                    <div className={`absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-full border flex items-center justify-center cursor-pointer ${q.correctOption === oIndex ? 'border-green-500 bg-green-500/20 text-green-500' : 'border-zinc-700 text-zinc-700'}`}\r\n                                        onClick={() => handleQuestionChange(qIndex, 'correctOption', oIndex)}\r\n                                    >\r\n                                        {q.correctOption === oIndex && <CheckCircle2 size={14} />}\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={opt}\r\n                                        onChange={(e) => handleOptionChange(qIndex, oIndex, e.target.value)}\r\n                                        className={`w-full bg-zinc-950 border rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none transition-colors ${q.correctOption === oIndex ? 'border-green-500/50' : 'border-zinc-800 focus:border-blue-500'}`}\r\n                                        placeholder={`Option ${oIndex + 1}`}\r\n                                    />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Sticky Save Button */}\r\n            <div className=\"fixed bottom-6 right-6 z-50\">\r\n                <button\r\n                    onClick={handleSubmit}\r\n                    disabled={submitting}\r\n                    className=\"bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-8 rounded-full shadow-2xl hover:shadow-green-500/25 transition-all transform hover:-translate-y-1 flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {submitting ? <Loader2 className=\"animate-spin\" /> : <Save />}\r\n                    <span>Save Test ({questions.length})</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateTestPage;\r\n"],"names":[],"mappings":"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"}}]
}