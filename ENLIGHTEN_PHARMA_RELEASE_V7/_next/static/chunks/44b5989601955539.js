(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27826,e=>{"use strict";let t=(0,e.i(78535).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],27826)},55572,e=>{"use strict";let t=(0,e.i(78535).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],55572)},36810,e=>{"use strict";var t=e.i(98745),s=e.i(15106),r=e.i(68694),a=e.i(27826),l=e.i(78535);let i=(0,l.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var n=e.i(55572);let c=(0,l.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),d=(0,l.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),o=(0,l.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);var x=e.i(16044),u=e.i(13125);let m=()=>{let e,l,m=(0,r.useSearchParams)().get("id"),h=(0,r.useRouter)(),[b,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(!0),[j,v]=(0,s.useState)(0),[y,N]=(0,s.useState)({}),[w,k]=(0,s.useState)([]),[z,S]=(0,s.useState)(0),[C,$]=(0,s.useState)(!1),[A,M]=(0,s.useState)(!1),q=(0,s.useRef)(null);(0,s.useEffect)(()=>(m&&I(),()=>clearInterval(q.current)),[m]),(0,s.useEffect)(()=>(z>0&&(q.current=setInterval(()=>{S(e=>e<=1?(clearInterval(q.current),R(!0),0):e-1)},1e3)),()=>clearInterval(q.current)),[z]);let I=async()=>{try{let e=(await x.default.get(`${u.API_BASE_URL}/api/tests/${m}`)).data.data;g(e),S(60*e.duration)}catch(e){alert("Error loading test")}finally{p(!1)}},R=async(e=!1)=>{if(e||confirm("Are you sure you want to submit the test?")){M(!0);try{let e=null;{let t=localStorage.getItem("auth-storage");if(t){let s=JSON.parse(t);e=s.state?.user?._id}}let t={testId:m,answers:y,studentId:e},s=(await x.default.post(`${u.API_BASE_URL}/api/results/submit`,t)).data.data;h.push(`/student/test-result?id=${m}&score=${s.score}&total=${s.totalMarks}&correct=${s.correctAnswers}&incorrect=${s.incorrectAnswers}`)}catch(e){console.error(e),alert("Error submitting test"),M(!1)}}};if(f)return(0,t.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:"Loading Test..."});let E=b?.questions[j];return(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[(0,t.jsxs)("header",{className:"h-16 border-b border-zinc-800 bg-zinc-900/50 flex items-center justify-between px-6 backdrop-blur-md sticky top-0 z-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h1",{className:"font-bold text-lg truncate max-w-[200px] sm:max-w-md",children:b.title}),(0,t.jsxs)("span",{className:"text-xs font-medium bg-zinc-800 px-2 py-1 rounded text-gray-400",children:["Q ",j+1," / ",b.questions.length]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 font-mono text-xl font-bold ${z<300?"text-red-500 animate-pulse":"text-green-400"}`,children:[(0,t.jsx)(a.Clock,{size:20}),(e=Math.floor(z/3600),l=Math.floor(z%3600/60),`${e}:${l.toString().padStart(2,"0")}:${(z%60).toString().padStart(2,"0")}`)]}),(0,t.jsx)("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),$(!1)):(document.documentElement.requestFullscreen(),$(!0))},className:"p-2 hover:bg-zinc-800 rounded-lg transition-colors hidden sm:block",children:C?(0,t.jsx)(o,{size:20}):(0,t.jsx)(d,{size:20})}),(0,t.jsx)("button",{onClick:()=>R(!1),disabled:A,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-bold text-sm transition-colors disabled:opacity-50",children:A?"Submitting...":"Submit Test"})]})]}),(0,t.jsxs)("main",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 lg:p-12",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl p-8 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-medium leading-relaxed mb-8",children:E.questionText}),(0,t.jsx)("div",{className:"space-y-4",children:E.options.map((e,s)=>(0,t.jsxs)("div",{onClick:()=>{N({...y,[j]:s})},className:`p-4 rounded-xl border cursor-pointer transition-all flex items-center gap-4 ${y[j]===s?"bg-blue-600/20 border-blue-500":"bg-zinc-950 border-zinc-800 hover:bg-zinc-800"}`,children:[(0,t.jsx)("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-xs font-bold ${y[j]===s?"bg-blue-500 border-blue-500 text-white":"border-gray-500 text-gray-500"}`,children:String.fromCharCode(65+s)}),(0,t.jsx)("span",{className:"text-gray-200",children:e})]},s))})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("button",{onClick:()=>v(e=>Math.max(0,e-1)),disabled:0===j,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border border-zinc-700",children:[(0,t.jsx)(i,{size:20})," Previous"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>{w.includes(j)?k(w.filter(e=>e!==j)):k([...w,j])},className:`flex items-center gap-2 px-6 py-3 rounded-xl border transition-colors font-medium ${w.includes(j)?"bg-orange-500/20 border-orange-500 text-orange-400":"bg-zinc-800 border-zinc-700 text-gray-300 hover:bg-zinc-700"}`,children:[(0,t.jsx)(c,{size:18})," ",w.includes(j)?"Unmark":"Mark Review"]}),(0,t.jsx)("button",{onClick:()=>N({...y,[j]:void 0}),className:"px-6 py-3 rounded-xl bg-zinc-800 border border-zinc-700 hover:bg-zinc-700 text-gray-300 transition-colors font-medium",children:"Clear"})]}),(0,t.jsxs)("button",{onClick:()=>v(e=>Math.min(b.questions.length-1,e+1)),disabled:j===b.questions.length-1,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-white",children:["Next ",(0,t.jsx)(n.ChevronRight,{size:20})]})]})]})}),(0,t.jsxs)("div",{className:"w-80 bg-zinc-900 border-l border-zinc-800 p-6 hidden lg:flex flex-col",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-300 mb-6",children:"Question Palette"}),(0,t.jsx)("div",{className:"grid grid-cols-5 gap-3 mb-8 max-h-[60vh] overflow-y-auto content-start",children:b.questions.map((e,s)=>{let r="bg-zinc-800 text-gray-400 border-zinc-700";return j===s?r="ring-2 ring-white bg-zinc-800 border-zinc-600":w.includes(s)?r="bg-orange-500 text-white border-orange-600":void 0!==y[s]&&(r="bg-green-600 text-white border-green-700"),(0,t.jsx)("button",{onClick:()=>v(s),className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm border transition-all ${r}`,children:s+1},s)})}),(0,t.jsxs)("div",{className:"mt-auto space-y-3 p-4 bg-zinc-950/50 rounded-xl border border-zinc-800 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-600"})," ",(0,t.jsx)("span",{className:"text-gray-400",children:"Answered"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"})," ",(0,t.jsx)("span",{className:"text-gray-400",children:"Marked for Review"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-zinc-800 border border-zinc-700"})," ",(0,t.jsx)("span",{className:"text-gray-400",children:"Not Visited"})]})]})]})]})]})};e.s(["default",0,()=>(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:"Loading Test Interface..."}),children:(0,t.jsx)(m,{})})],36810)}]);